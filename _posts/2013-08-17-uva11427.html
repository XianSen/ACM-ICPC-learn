<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on http://github.com/jonrohan -->
<!-- The html is written by XianSen. And use Jon Rohan's css. -->
<html>
<head>
  <!-- 不变的部分 -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  	<link rel="stylesheet" href="http://xiansen.github.io/ACM-ICPC-learn/stylesheets/stylesheet.css" media="screen"/>

  	<link rel="stylesheet" href="http://xiansen.github.io/ACM-ICPC-learn/stylesheets/pygment_trac.css"/>

  	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

  	<script type="text/javascript" src="http://xiansen.github.io/ACM-ICPC-learn/javascripts/script.js"></script>

    <!-- 不变的部分 -->

  	<title>uva11427: Expect the Expected</title>
  	<meta name="description" content="ACM uva11427 题解">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">Expect the Expected</h1>
    </header>

    <div id="container">
      	<p class="tagline">
      		<a href="http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&category=481&problem=2422&mosmsg=Submission+received+with+ID+12213929"> UVA11427题解
      		</a>
      	</p>
      	<div id="main" role="main">
       	 <div class="download-bar">
       	    <div class="inner">
          <a href="https://github.com/XianSen/ACM-ICPC-learn/blob/gh-pages/src/UVa/chapter2/Probability/u-11427.cpp" class="download-button tar"><span>Downloads</span></a>
          <a href="https://github.com/XianSen/ACM-ICPC-learn/blob/gh-pages/src/UVa/chapter2/Probability/u-11427.cpp" class="code">View  on GitHub</a>
        	</div>
        	<span class="blc"></span><span class="trc"></span>
        </div>

        <article class="markdown-body">
          	<h3>
				题目大意
		   	</h3>

			<p> 有个喜欢玩纸牌游戏的人，每次玩都有p的概率会胜。对每一天来说：
            <ol>
                <li>
                    如果第一次玩胜了，他今天就不玩了，明天再继续玩.
                </li>

                <li>
                   如果第一次玩输了，他就会一直玩。设他总共玩了sum次，其中胜了win次。他会一直玩到win/sum > p。
                </li>
            </ol>
            这里有个限制，即他一天不能玩超过n次(1&lt;=n&lt;=100),如果超过n次，或者 win/sum 不能超过p,则他以后都不会玩这个游戏了。给定a,b(p = a / b) 和 n,求他玩的天数的期望值 </p>


		<h3>
			<a name="analysis" class="anchor" href="#analysis"><span class="octicon octicon-link"></span></a>题目分析</h3>
      <p>		
          我们分两步解决这个问题。
      </p>   
      <h4>第一步</h4>
        <p> 我们先计算玩了n次都不能达到要求的概率，即他第二天不会继续玩的概率Q。我们用dp[i][j]表示玩了i次，每一轮后都满足win/sum &lt;=p，且其中恰好j次胜利的概率。则 </p>

        <pre> <code>dp[i][j] = sum{dp[i-1][j-1] * p, dp[i-1][j]*(1-p), j * p &lt;=i} </code> </pre>

        <p>这样就可以方便地求Q了</p>

        <pre>f(n, p) = min{k | k * n > p};
Q = sum{dp[i-1][f(i, p)] * p, 1&lt;=i&lt;=n};</pre>

      <h4>第二步</h4>
      <p> 我们设我们所求的期望为S则：</p>
      <pre>(1) S = 1 * Q + 2 * Q * (1 - Q)  + 3 * Q * (1 - Q)^2 ...+n * Q * (1 - Q)^(n - 1);
(2) (1-Q)S = Q*(1-Q) + 2 * Q * (1 - Q)^2 + ... + 
            (n- 1)*Q * (1 - Q) ^ (n - 1) + n * Q * (1 - Q) ^ n
(1) - (2)取极限并求简化后可得S = 1 / Q;</pre>

		<h3>
			<a name="support-or-contact" class="anchor" href="#support-or-contact"><span class="octicon octicon-link"></span></a>Support or Contact</h3>

		<p>转载请先阅读<a href="https://github.com/XianSen/ACM-ICPC-learn/blob/gh-pages/src/readme">声明</a>，
			并<strong>注明</strong>出处. 有任何问题请联系<a href="nothi1992@gmail.com">XianSen(nothi1992@gmail.com)</a></p>
        </article>
      </div>
    </div>

    <footer>
      <div class="owner">
      <p><a href="https://github.com/XianSen" class="avatar"><img src="https://secure.gravatar.com/avatar/51346c59edc0a485f5b2c523accc1e79?s=30&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="48" height="48"/></a> <a href="https://github.com/XianSen">XianSen</a> maintains <a href="https://github.com/XianSen/ACM-ICPC-learn">Acm-icpc-learn</a></p>


      </div>
      <div class="creds">
        <small>This page generated using <a href="https://pages.github.com/">GitHub Pages</a><br/>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a> </small>
      </div>
    </footer>
  </div>

  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/XianSen/ACM-ICPC-learn/blob/gh-pages/src/readme" class="tar">tar</a><a href="https://github.com/XianSen/ACM-ICPC-learn/blob/gh-pages/src/UVa/chapter2/GameTheory/Intermediate/u-1378.cpp" class="code">source code</a>
    <p class="name"></p>
  </div>

  
</body>
</html>
